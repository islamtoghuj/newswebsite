<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>JIP News!</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
</head>

<body>
    <div class="container mt-5">
        <header>
            <h1 class="mb-4">JIP News</h1>
            <p id="currentDate"></p>
        </header>
        <section class="mb-5">
            <h2>Breaking News</h2>
            <div class="row" id="breakingNewsContainer"></div>
        </section>

        <!-- Add a form for the user to enter their email -->
        <form id="notificationForm">
            <div class="mb-3">
                <label for="emailInput" class="form-label">Enter your email:</label>
                <input type="email" class="form-control" id="emailInput" required>
            </div>
            <button type="button" class="btn btn-primary" onclick="receiveNotifications()">Receive Notifications</button>
        </form>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
        crossorigin="anonymous"></script>
    <script src="https://cdn.ampproject.org/rtv/6.0.10/amp-amazon-cognito-login.js"></script>
    <script>
        const apiToken = "ZRJjRQjMVlu0ENfpVuvRiaZOrrSTA8FTKElXcWGW";
        const currentDateElement = document.getElementById("currentDate");
        const breakingNewsContainer = document.getElementById("breakingNewsContainer");

        const fetchNews = async () => {
            // Function to fetch news remains the same
            // ...
        };

        const renderBreakingNews = (articles) => {
            // Function to render news remains the same
            // ...
        };

        const getCurrentDate = () => {
            // Function to get current date remains the same
            // ...
        };

        currentDateElement.textContent = getCurrentDate();
        fetchNews();

        // Function to handle receiving notifications
        const receiveNotifications = async () => {
            const userEmail = document.getElementById("emailInput").value;

            try {
                // Make an API request to your endpoint
                const response = await Amplify.API.post("jipnotification-API", "/jipnotification", {
                    body: {
                        email: userEmail,
                    },
                });

                console.log("API Response:", response);
                alert("Notification request sent successfully!");
            } catch (error) {
                console.error("Error sending notification request:", error);
                alert("Error sending notification request. Please try again.");
            }
        };
    </script>
</body>

</html>
